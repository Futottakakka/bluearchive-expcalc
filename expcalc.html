<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>BA Sensei Exp Calculator</title>
	    <style>
      body {
        background-color: #111;
        color: #fff;
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
      }
	  
	  a {
		color: #eee
		}
      
      h1 {
        font-size: 2em;
        text-align: center;
      }
	  h2 {
        font-size: 1.5em;
        text-align: center;
      }
      h3 {
		font-size: 1em;
		text-align: center;
	  }
	  h4 {
		font-size: .85em;
		text-align: center;
	  }
		
      form {
        display: flex;
        flex-direction: column;
        align-items: center;
      }
      
      label {
        display: inline-block;
        margin: 1em 0 0.5em;
      }
      
      input[type="number"] {
        border-radius: 0.25em;
        border: none;
        padding: 0.5em;
        font-size: 1.1em;
        width: 10em;
      }
      
      input[type="button"] {
        background-color: #fff;
        border: none;
        border-radius: 0.25em;
        color: #111;
        cursor: pointer;
        font-size: 1.1em;
        margin: 1em 0 2em;
        padding: 0.5em 1em;
        text-transform: uppercase;
      }
      
      input[type="button"]:hover {
        background-color: #ddd;
      }
      
      #expNeeded {
        font-size: 1.5em;
        margin: 1em;
        text-align: center;
		  }
	  table {
		border-collapse: collapse;
		margin: 1rem 0;
		background-color: #444;
		color: #fff;
		width: 30%;
		margin: 0 auto;
	  }

	  th, td {
		padding: 0.5rem;
		border: 1px solid #fff;
		text-align: center;
	  }

	  th {
		background-color: #333;
	  }

	  tr:nth-child(even) {
		background-color: #555;
	  }
    </style>
  </head>
  <body>
    <h1>Blue Archive Sensei Exp Calculator</h1>
	<h2>by Futotta-kakka</h2>
	<h3><a href="https://github.com/aizawey479/ba-data"> EXP Data Source </a> | <a href=""> EXP Calc Source </a></h3>
    <form>
      <label for="currentLevel">Current Level:</label>
      <input type="number" id="currentLevel" name="currentLevel" min="1" max="84" value="1"><br><br>
	  <label for="currentLevelExp">Current EXP in Level:</label>
      <input type="number" id="currentLevelExp" name="currentLevelExp" min="0" max="9459" value="0"><br><br>
      <label for="targetLevel">Target Level (max 85JP/80GLB):</label>
      <input type="number" id="targetLevel" name="targetLevel" max="85" min="2" value="85"><br><br>
	  <label for="expPerDay">Expected Exp/AP Spent per day:</label>
	  <input type="number" id="expPerDay" name="expPerDay" min="0" max="9999" value="1"><br><br>
      <input type="button" value="Calculate" onclick="calculateXP()">
	<h3>Cafe AP Value table</h3>
	<h4>I do not know how AP/Hr is calculated and the data isn't presented. </br> I took my current max AP at rank 6 (460) and divided it by AP/hr at rank 6 (19.49/hr).</br> This gave me <b>23.60184710107748 hrs per Max AP Fill</b>. I then used as the constant for a ROUGH EstimatedActionPointsPerHour for the other ranks.</h4>
	<table>
	  <thead>
		<tr>
		  <th>Cafe Rank</th>
		  <th>ActionPointStorageMax</th>
		  <th>EstimatedActionPointsPerHour</th>
		</tr>
	  </thead>
	  <tbody>
		<tr>
		  <td>1</td>
		  <td>90</td>
		  <td>3.8178342783568896</td>
		</tr>
		<tr>
		  <td>2</td>
		  <td>150</td>
		  <td>6.353057130594816</td>
		</tr>
		<tr>
		  <td>3</td>
		  <td>220</td>
		  <td>9.310344827586206</td>
		</tr>
		<tr>
		  <td>4</td>
		  <td>300</td>
		  <td>12.716763005780347</td>
		</tr>
		<tr>
		  <td>5</td>
		  <td>390</td>
		  <td>16.50563360402685</td>
		</tr>
		<tr>
		  <td>6</td>
		  <td>460</td>
		  <td>19.483172782227786</td>
		</tr>
		<tr>
		  <td>7</td>
		  <td>530</td>
		  <td>22.46071196042872</td>
		</tr>
		<tr>
		  <td>8</td>
		  <td>600</td>
		  <td>25.438251138629655</td>
		</tr>
		<tr>
		  <td>9</td>
		  <td>670</td>
		  <td>28.41579031683059</td>
		</tr>
		<tr>
		  <td>10</td>
		  <td>740</td>
		  <td>31.393329495031525</td>
		</tr>
	  </tbody>
	</table>
    </form>
    <p id="expNeeded"></p>
    <script>
      var levelData = [
    {"level": 1, "exp": 8},
    {"level": 2, "exp": 10},
    {"level": 3, "exp": 15},
    {"level": 4, "exp": 21},
    {"level": 5, "exp": 28},
    {"level": 6, "exp": 36},
    {"level": 7, "exp": 45},
    {"level": 8, "exp": 55},
    {"level": 9, "exp": 66},
    {"level": 10, "exp": 79},
    {"level": 11, "exp": 93},
    {"level": 12, "exp": 108},
    {"level": 13, "exp": 124},
    {"level": 14, "exp": 141},
    {"level": 15, "exp": 159},
    {"level": 16, "exp": 178},
    {"level": 17, "exp": 198},
    {"level": 18, "exp": 219},
    {"level": 19, "exp": 241},
    {"level": 20, "exp": 265},
    {"level": 21, "exp": 288},
    {"level": 22, "exp": 312},
    {"level": 23, "exp": 337},
    {"level": 24, "exp": 363},
    {"level": 25, "exp": 390},
    {"level": 26, "exp": 418},
    {"level": 27, "exp": 447},
    {"level": 28, "exp": 477},
    {"level": 29, "exp": 508},
    {"level": 30, "exp": 581},
    {"level": 31, "exp": 656},
    {"level": 32, "exp": 734},
    {"level": 33, "exp": 814},
    {"level": 34, "exp": 897},
    {"level": 35, "exp": 982},
    {"level": 36, "exp": 1069},
    {"level": 37, "exp": 1159},
    {"level": 38, "exp": 1251},
    {"level": 39, "exp": 1346},
    {"level": 40, "exp": 1443},
    {"level": 41, "exp": 1543},
    {"level": 42, "exp": 1645},
    {"level": 43, "exp": 1750},
    {"level": 44, "exp": 1857},
    {"level": 45, "exp": 1966},
    {"level": 46, "exp": 2078},
    {"level": 47, "exp": 2192},
    {"level": 48, "exp": 2309},
    {"level": 49, "exp": 2428},
    {"level": 50, "exp": 2550},
    {"level": 51, "exp": 2674},
    {"level": 52, "exp": 2800},
    {"level": 53, "exp": 2929},
    {"level": 54, "exp": 3060},
    {"level": 55, "exp": 3194},
    {"level": 56, "exp": 3330},
    {"level": 57, "exp": 3469},
    {"level": 58, "exp": 3610},
    {"level": 59, "exp": 3754},
    {"level": 60, "exp": 3900},
    {"level": 61, "exp": 4048},
    {"level": 62, "exp": 4199},
    {"level": 63, "exp": 4352},
    {"level": 64, "exp": 4508},
    {"level": 65, "exp": 4666},
    {"level": 66, "exp": 4831},
    {"level": 67, "exp": 5007},
    {"level": 68, "exp": 5186},
    {"level": 69, "exp": 5369},
    {"level": 70, "exp": 5556},
    {"level": 71, "exp": 5747},
    {"level": 72, "exp": 5942},
    {"level": 73, "exp": 6141},
    {"level": 74, "exp": 6344},
    {"level": 75, "exp": 6552},
    {"level": 76, "exp": 6768},
    {"level": 77, "exp": 6989},
    {"level": 78, "exp": 7216},
    {"level": 79, "exp": 7449},
    {"level": 80, "exp": 7682},
    {"level": 81, "exp": 7915},
    {"level": 82, "exp": 8148},
    {"level": 83, "exp": 8381},
    {"level": 84, "exp": 8883},
    {"level": 85, "exp": 9460}
  ];

      
      function calculateXP() {
        var currentLevel = parseInt(document.getElementById("currentLevel").value);
        var targetLevel = parseInt(document.getElementById("targetLevel").value);
		var currentLevelExp = parseInt(document.getElementById("currentLevelExp").value);
        
        if (isNaN(currentLevel) || isNaN(targetLevel) || isNaN(currentLevelExp))  {
          alert("Please enter valid numbers for all fields.");
          return;
        }
        
        if (targetLevel <= currentLevel) {
          alert("Target level must be greater than current level.");
          return;
        }
        
        var expNeeded = 0;
        
        for (var i = currentLevel - 1; i < targetLevel - 1; i++) {
          expNeeded += levelData[i].exp;
        }
        
        document.getElementById("expNeeded").innerHTML = "XP needed: " + expNeeded;
		
		var expPerDay = parseInt(document.getElementById("expPerDay").value);

		var totalEXPNeeded = expNeeded - currentLevelExp;
		var daysNeeded = Math.ceil((totalEXPNeeded / expPerDay));
		var monthsNeeded = Math.ceil((daysNeeded / 30.44));

		document.getElementById("expNeeded").innerHTML = "Exp needed: " + totalEXPNeeded + ". Estimated time to reach target level: " + daysNeeded + " days (~"+ monthsNeeded + " months).";

		
      }
    </script>
  </body>
</html>
